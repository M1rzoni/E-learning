<div class="course-detail-container" *ngIf="course && !isLoading">
  <!-- Breadcrumb navigacija -->
  <nav class="breadcrumb">
    <a routerLink="/home">Početna</a> &gt;
    <a routerLink="/courses">Kursevi</a> &gt;
    <span>{{ course.title }}</span>
    
    <!-- Admin akcije -->
    <span *ngIf="isAdmin" class="admin-actions">
      &gt; <a (click)="editCourse()" class="admin-link">Uredi</a>
      &gt; <a (click)="deleteCourse()" class="admin-link delete">Obriši</a>
    </span>
  </nav>

  <!-- Glavni sadržaj kursa -->
  <div class="course-header">
    <div class="course-info">
      <h1>{{ course.title }}</h1>
      <p class="course-description">{{ course.description }}</p>
      
      <div class="course-meta">
        <span class="category-badge">{{ course.category }}</span>
        <div class="rating">
          <span class="stars">⭐️⭐️⭐️⭐️⭐️</span>
          <span class="rating-text">4.8 (256 recenzija)</span>
        </div>
        <div class="students-count">
          <span class="icon">👥</span>
          <span>1,245 studenata</span>
        </div>
      </div>

      <div class="instructor">
        <div class="instructor-avatar">👨‍🏫</div>
        <div class="instructor-info">
          <h4>Predavač: Profesor Adis</h4>
          <p>Senior developer sa 10+ godina iskustva</p>
        </div>
      </div>

      <!-- Sekcija za kupovinu -->
      <div class="purchase-section" *ngIf="currentUser && !isPurchased">
        <h3>Kupi Kurs</h3>
        <p class="price">Cijena: {{ course.price ? (course.price + '€') : 'Besplatno' }}</p>
        <p class="balance">Tvoj balans: {{ userBalance }}€</p>
        
        <div class="purchase-actions">
          <button 
            class="btn-enroll" 
            (click)="purchaseCourse()"
            [disabled]="isPurchasing || (course.price > 0 && userBalance < course.price)"
          >
            <span *ngIf="!isPurchasing">🛒 Kupi odmah</span>
            <span *ngIf="isPurchasing">⏳ Obrada...</span>
          </button>
          
          <button 
            class="btn-wishlist"
            (click)="toggleSaveCourse()"
          >
            <span *ngIf="!isSaved">❤️ Sačuvaj za kasnije</span>
            <span *ngIf="isSaved">❌ Ukloni iz sačuvanih</span>
          </button>
        </div>

        <div *ngIf="course.price > 0 && userBalance < course.price" class="insufficient-funds">
          <p>Nemaš dovoljno sredstava! Trenutni balans: {{ userBalance }}€</p>
          <div class="add-funds">
            <button (click)="addFunds(10)">+10€</button>
            <button (click)="addFunds(20)">+20€</button>
            <button (click)="addFunds(50)">+50€</button>
            <button (click)="goToWallet()" class="btn-wallet">💰 Upravljaj novčanikom</button>
          </div>
        </div>
      </div>

      <div *ngIf="isPurchased" class="purchased-info">
        <h3>✅ Već ste kupili ovaj kurs</h3>
        <p>Možete pristupti sadržaju kursa odmah.</p>
      </div>

      <div *ngIf="!currentUser" class="login-required">
        <h3>⚠️ Potrebna prijava</h3>
        <p>Morate biti prijavljeni da biste kupili ili sačuvali ovaj kurs.</p>
        <a routerLink="/login" class="btn-enroll">Prijavi se</a>
      </div>
    </div>

    <div class="course-image">
      <img *ngIf="course.image" [src]="'http://localhost/eucenje-backend/' + course.image" alt="{{ course.title }}">
      <div *ngIf="!course.image" class="image-placeholder">
        <span>📚</span>
        <p>Slika kursa</p>
      </div>
      
      <div class="course-highlights">
        <div class="highlight">
          <span class="icon">⏱️</span>
          <span>10h video sadržaja</span>
        </div>
        <div class="highlight">
          <span class="icon">📝</span>
          <span>25 vježbi</span>
        </div>
        <div class="highlight">
          <span class="icon">📅</span>
          <span>Puni pristup zauvijek</span>
        </div>
        <div class="highlight">
          <span class="icon">📱</span>
          <span>Dostupno na svim uređajima</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Detalji i curriculum -->
  <div class="course-content">
    <div class="content-nav">
      <button class="nav-btn active">Pregled</button>
      <button class="nav-btn">Curriculum</button>
      <button class="nav-btn">Recenzije</button>
      <button class="nav-btn">Diskusije</button>
    </div>

    <div class="content-section">
      <h3>Šta ćete naučiti</h3>
      <ul class="learning-list">
        <li>✔️ Savladati osnove {{ course.category }} razvoja</li>
        <li>✔️ Napredne tehnike i najbolje prakse</li>
        <li>✔️ Praktični projekti za portfolio</li>
        <li>✔️ Priprema za posao u industriji</li>
      </ul>
    </div>

    <div class="content-section">
      <h3>Za koga je ovaj kurs</h3>
      <ul class="audience-list">
        <li>• Početnici koji žele da nauče {{ course.category }}</li>
        <li>• Srednje napredni koji žele da usavrše svoje veštine</li>
        <li>• Profesionalci koji žele da prošire svoje znanje</li>
      </ul>
    </div>
  </div>

  <!-- Preporučeni kursevi -->
  <div class="related-courses">
    <h2>Slični kursevi</h2>
    <div class="courses-grid">
      <div class="course-card">
        <div class="card-image">
          <div class="image-placeholder">💻</div>
        </div>
        <div class="card-content">
          <h4>Napredni {{ course.category }} koncepti</h4>
          <p class="card-description">Produbite svoje znanje sa naprednim temama</p>
          <div class="card-meta">
            <span class="card-category">{{ course.category }}</span>
            <span class="card-price">59.99€</span>
          </div>
        </div>
      </div>

      <div class="course-card">
        <div class="card-image">
          <div class="image-placeholder">🚀</div>
        </div>
        <div class="card-content">
          <h4>{{ course.category }} projekti za portfolio</h4>
          <p class="card-description">Izgradite impresivan portfolio sa realnim projektima</p>
          <div class="card-meta">
            <span class="card-category">{{ course.category }}</span>
            <span class="card-price">44.99€</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading state -->
<div *ngIf="isLoading" class="loading-container">
  <div class="loading-spinner"></div>
  <p>Učitavanje detalja kursa...</p>
</div>

<!-- Error state -->
<div *ngIf="!course && !isLoading" class="error-container">
  <h2>😕 Kurs nije pronađen</h2>
  <p>Traženi kurs ne postoji ili nije dostupan.</p>
  <a routerLink="/courses" class="btn-primary">Vrati se na kurseve</a>
</div>

 <div *ngIf="isAdmin" class="admin-info">
    <h4>🔧 Admin Mode</h4>
    <p>Vi imate administratorske privilegije za uređivanje kurseva.</p>
    <div class="admin-buttons">
      <button (click)="editCourse()" class="btn-edit">✏️ Uredi Kurs</button>
      <button (click)="deleteCourse()" class="btn-delete">🗑️ Obriši Kurs</button>
    </div>
  </div>
