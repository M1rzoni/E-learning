<div class="course-detail-container" *ngIf="course && !isLoading">
  <!-- Breadcrumb navigacija -->
  <nav class="breadcrumb">
    <a routerLink="/home">PoÄetna</a> &gt;
    <a routerLink="/courses">Kursevi</a> &gt;
    <span>{{ course.title }}</span>
    
    <!-- Admin akcije -->
    <span *ngIf="isAdmin" class="admin-actions">
      &gt; <a (click)="editCourse()" class="admin-link">Uredi</a>
      &gt; <a (click)="deleteCourse()" class="admin-link delete">ObriÅ¡i</a>
    </span>
  </nav>

  <!-- Glavni sadrÅ¾aj kursa -->
  <div class="course-main-content">
    <!-- Slika kursa i osnovne informacije -->
    <div class="course-hero">
      <div class="course-image-section">
        <div class="course-image">
          <img [src]="getImageUrl(course?.image)" 
               (error)="handleImageError($event)"
               alt="{{ course?.title }}"
               class="course-main-image">
          <div *ngIf="!course?.image" class="image-placeholder">
            <span>ğŸ“š</span>
            <p>Nema slike kursa</p>
          </div>
        </div>
        
        <div class="course-highlights">
          <div class="highlight">
            <span class="icon">â±ï¸</span>
            <span>10h video sadrÅ¾aja</span>
          </div>
          <div class="highlight">
            <span class="icon">ğŸ’ª</span>
            <span>25 vjeÅ¾bi</span>
          </div>
          <div class="highlight">
            <span class="icon">âˆ</span>
            <span>Puni pristup zauvijek</span>
          </div>
          <div class="highlight">
            <span class="icon">ğŸ“±</span>
            <span>Dostupno na svim ureÄ‘ajima</span>
          </div>
        </div>
      </div>

      <div class="course-info-section">
        <div class="course-basic-info">
          <h1>{{ course.title }}</h1>
          <p class="course-description">{{ course.description }}</p>
          
          <div class="course-meta">
            <span class="category-badge">{{ course.category }}</span>
            <span class="level-badge">{{ course.level }}</span>
            <div class="rating">
              <span class="stars">â­ï¸â­ï¸â­ï¸â­ï¸â­ï¸</span>
              <span class="rating-text">4.8 (256 recenzija)</span>
            </div>
            <div class="students-count">
              <span class="icon">ğŸ‘¥</span>
              <span>1,245 studenata</span>
            </div>
          </div>

          <div class="instructor">
            <div class="instructor-avatar">ğŸ‘¨â€ğŸ«</div>
            <div class="instructor-info">
              <h4>PredavaÄ: Profesor Adis</h4>
              <p>Senior developer sa 10+ godina iskustva</p>
            </div>
          </div>
        </div>

        <!-- Sekcija za kupovinu -->
        <div class="course-purchase-section">
          <h3>Kupi Kurs</h3>
          
          <div class="price-section">
            <h4>Cijena: 
              <span *ngIf="course?.price > 0" class="course-price">{{ course?.price }}â‚¬</span>
              <span *ngIf="course?.price === 0" class="course-price free">Besplatno</span>
            </h4>
            <p class="user-balance">Tvoj balans: {{ userBalance }}â‚¬</p>
          </div>

          <!-- Akcije za kupovinu -->
          <div class="purchase-actions">
            <!-- Besplatni kurs -->
            <div *ngIf="course?.price === 0">
              <button (click)="purchaseCourse()" 
                      [disabled]="isPurchasing || isPurchased" 
                      class="btn-purchase">
                {{ isPurchasing ? 'U toku...' : (isPurchased ? 'VeÄ‡ kupljeno' : 'Enroll Besplatno') }}
              </button>
            </div>

            <!-- PlaÄ‡eni kurs -->
            <div *ngIf="course?.price > 0">
              <!-- VeÄ‡ kupljeno -->
              <div *ngIf="isPurchased" class="already-purchased">
                <button class="btn-purchased" disabled>âœ… VeÄ‡ kupljeno</button>
              </div>

              <!-- Nije kupljeno -->
              <div *ngIf="!isPurchased">
                <!-- Dovoljno sredstava -->
                <div *ngIf="userBalance >= course?.price">
                  <button (click)="purchaseCourse()" 
                          [disabled]="isPurchasing" 
                          class="btn-purchase">
                    {{ isPurchasing ? 'Kupovina u toku...' : 'Kupi odmah - ' + course?.price + 'â‚¬' }}
                  </button>
                </div>

                <!-- Nema dovoljno sredstava -->
                <div *ngIf="userBalance < course?.price" class="insufficient-funds">
                  <div class="warning-message">
                    âš ï¸ NemaÅ¡ dovoljno sredstava! Trenutni balans: {{ userBalance }}â‚¬
                  </div>
                  <div class="quick-add-section">
                    <p>Brzo dodaj sredstva:</p>
                    <div class="quick-buttons">
                      <button (click)="addFunds(10)" class="btn-quick-add">+10â‚¬</button>
                      <button (click)="addFunds(20)" class="btn-quick-add">+20â‚¬</button>
                      <button (click)="addFunds(50)" class="btn-quick-add">+50â‚¬</button>
                    </div>
                    <button (click)="goToWallet()" class="btn-wallet">ğŸ‘› Upravljanje novÄanikom</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- SaÄuvaj za kasnije -->
            <div class="save-action">
              <button (click)="toggleSaveCourse()" 
                      [class.saved]="isSaved"
                      class="btn-save">
                {{ isSaved ? 'âœ… SaÄuvano' : 'ğŸ’¾ SaÄuvaj za kasnije' }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Detalji i curriculum -->
    <div class="course-content">
      <div class="content-nav">
        <button class="nav-btn active">Pregled</button>
        <button class="nav-btn">Curriculum</button>
        <button class="nav-btn">Recenzije</button>
        <button class="nav-btn">Diskusije</button>
      </div>

      <div class="content-section">
        <h3>Å ta Ä‡ete nauÄiti</h3>
        <ul class="learning-list">
          <li>Savladati osnove {{ course.category }} razvoja</li>
          <li>Napredne tehnike i najbolje prakse</li>
          <li>PraktiÄni projekti za portfolio</li>
          <li>Priprema za posao u industriji</li>
        </ul>
      </div>

      <div class="content-section">
        <h3>Za koga je ovaj kurs</h3>
        <ul class="audience-list">
          <li>PoÄetnici koji Å¾ele da nauÄe {{ course.category }}</li>
          <li>Srednje napredni koji Å¾ele da usavrÅ¡e svoje veÅ¡tine</li>
          <li>Profesionalci koji Å¾ele da proÅ¡ire svoje znanje</li>
        </ul>
      </div>
    </div>

    <!-- Admin panel -->
    <div *ngIf="isAdmin" class="admin-info">
      <h4>ğŸ”§ Admin Mode</h4>
      <p>Vi imate administratorske privilegije za ureÄ‘ivanje kurseva.</p>
      <div class="admin-buttons">
        <button (click)="editCourse()" class="btn-edit">âœï¸ Uredi Kurs</button>
        <button (click)="deleteCourse()" class="btn-delete">ğŸ—‘ï¸ ObriÅ¡i Kurs</button>
      </div>
    </div>

    <!-- PreporuÄeni kursevi -->
    <div class="related-courses">
      <h2>SliÄni kursevi</h2>
      <div class="courses-grid">
        <div class="course-card">
          <div class="card-image">
            <div class="image-placeholder">ğŸ’»</div>
          </div>
          <div class="card-content">
            <h4>Napredni {{ course.category }} koncepti</h4>
            <p class="card-description">Produbite svoje znanje sa naprednim temama</p>
            <div class="card-meta">
              <span class="card-category">{{ course.category }}</span>
              <span class="card-price">59.99â‚¬</span>
            </div>
          </div>
        </div>

        <div class="course-card">
          <div class="card-image">
            <div class="image-placeholder">ğŸš€</div>
          </div>
          <div class="card-content">
            <h4>{{ course.category }} projekti za portfolio</h4>
            <p class="card-description">Izgradite impresivan portfolio sa realnim projektima</p>
            <div class="card-meta">
              <span class="card-category">{{ course.category }}</span>
              <span class="card-price">44.99â‚¬</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Loading state -->
<div *ngIf="isLoading" class="loading-container">
  <div class="loading-spinner"></div>
  <p>UÄitavanje detalja kursa...</p>
</div>

<!-- Error state -->
<div *ngIf="!course && !isLoading" class="error-container">
  <h2>ğŸ˜• Kurs nije pronaÄ‘en</h2>
  <p>TraÅ¾eni kurs ne postoji ili nije dostupan.</p>
  <a routerLink="/courses" class="btn-primary">Vrati se na kurseve</a>
</div>