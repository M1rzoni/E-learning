<h2>Kursevi po kategorijama</h2>

<!-- Grupisani prikaz po kategorijama -->
<div *ngFor="let category of getGroupedCourses() | keyvalue">
  <h2>{{ category.key }}</h2>

  <div *ngFor="let course of category.value">
    <h3>
      <a [routerLink]="['/course', course.id]">{{ course.title }}</a>
    </h3>
    <p>{{ course.description }}</p>

    <!-- Slika kursa -->
    <img *ngIf="course.image" [src]="'http://localhost/eucenje-backend/' + course.image" width="150" />

    <!-- Dugmad -->
    <button (click)="confirmDelete(course.id)">Obriši</button>
    <button (click)="editCourse(course)">Uredi</button>

    <!-- Upload slike -->
    <input type="file" (change)="uploadImage($event, course.id)" />
  </div>
</div>

<!-- Forma za uređivanje selektovanog kursa -->
<div *ngIf="selectedCourse">
  <h3>Uredi kurs</h3>
  <form #courseForm="ngForm">
    <label for="title">Naslov:</label>
    <input 
      type="text" 
      id="title"
      [(ngModel)]="selectedCourse.title" 
      name="title" 
      required
    />

    <label for="description">Opis:</label>
    <input 
      type="text" 
      id="description"
      [(ngModel)]="selectedCourse.description" 
      name="description" 
      required
    />

    <label for="category">Kategorija:</label>
    <select id="category" [(ngModel)]="selectedCourse.category" name="category" required>
      <option value="Frontend">Frontend</option>
      <option value="Backend">Backend</option>
      <option value="Dizajn">Dizajn</option>
    </select>
    
    <button 
      type="button" 
      (click)="updateCourse()" 
      [disabled]="!courseForm.form.valid || isUpdating">
      {{ isUpdating ? 'Čuva...' : 'Spasi promjene' }}
    </button>
    <button type="button" (click)="selectedCourse = null">Otkaži</button>

    <!-- Upload slike za selektovani kurs -->
    <input type="file" (change)="uploadImage($event, selectedCourse.id)" />
    <img *ngIf="selectedCourse.image" [src]="'http://localhost/eucenje-backend/' + selectedCourse.image" width="150" />
  </form>
</div>
